<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{{ page.title }} | {{ site.title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Modern, readable font from Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Inter:400,500,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
  {% if site.highlighter == "rouge" %}
    <!-- Load Rouge syntax highlighting CSS if enabled in _config.yml -->
    <link rel="stylesheet" href="{{ '/assets/css/syntax.css' | relative_url }}">
  {% endif %}
  <style>
    /* Fallback if main.css is missing */
    body { font-family: 'Inter', Arial, sans-serif; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav>
      <a href="{{ site.baseurl }}/">HOME</a>
      <a href="{{ site.baseurl }}/guides/">GUIDES</a>
      <a href="{{ site.baseurl }}/about/">ABOUT</a>
      <a href="{{ site.baseurl }}/contact/">CONTACT</a>
    </nav>
    <button id="theme-toggle" aria-label="Toggle dark mode" title="Toggle dark mode">ðŸŒ™</button>
  </header>
  <main class="site-main">
    {{ content }}
  </main>
  <footer class="site-footer">
    &copy; {{ site.time | date: '%Y' }} {{ site.title }}. All rights reserved.
  </footer>
  <script>
    // Dark mode toggle logic
    const toggleBtn = document.getElementById('theme-toggle');
    const darkModeKey = 'dark-mode';
    function setTheme(mode) {
      document.documentElement.setAttribute('data-theme', mode ? 'dark' : 'light');
      toggleBtn.textContent = mode ? 'â˜€ï¸' : 'ðŸŒ™';
      toggleBtn.title = mode ? 'Switch to light mode' : 'Switch to dark mode';
    }
    function getMode() {
      // If preference exists, use it
      if (localStorage.getItem(darkModeKey) !== null) {
        return localStorage.getItem(darkModeKey) === 'true';
      }
      // Otherwise, follow system preference
      return window.matchMedia('(prefers-color-scheme: dark)').matches;
    }
    toggleBtn.addEventListener('click', () => {
      const mode = !getMode();
      localStorage.setItem(darkModeKey, mode);
      setTheme(mode);
    });
    // Init on page load
    setTheme(getMode());
    // Listen for system preference changes
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
      if (localStorage.getItem(darkModeKey) === null) {
        setTheme(e.matches);
      }
    });
  </script>
</body>
</html>