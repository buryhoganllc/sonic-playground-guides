/* theme-toggle.css
   - System-aware light/dark theming with a manual override via [data-theme]
   - Smooth transitions, accessible contrast, and sensible defaults
   - Plays nicely with Rouge/GitHub Pages syntax styles; includes optional token vars as fallback
*/

/* ---------- Color tokens: light (default) ---------- */
:root {
  /* App */
  --bg: #ffffff;
  --fg: #0f172a;            /* slate-900 */
  --muted-fg: #475569;      /* slate-600 */
  --border: #e2e8f0;        /* slate-200 */
  --card: #f8fafc;          /* slate-50 */
  --shadow: 0 1px 2px rgba(0, 0, 0, .06), 0 4px 12px rgba(0, 0, 0, .04);

  /* Accent */
  --accent: #2563eb;        /* blue-600 */
  --accent-contrast: #ffffff;

  /* Links */
  --link: #2563eb;
  --link-hover: #1e40af;

  /* Code */
  --code-bg: #f6f8fa;       /* GitHub-like */
  --code-inline-bg: #f3f4f6;/* gray-100 */
  --code-fg: #24292e;

  /* Optional syntax token variables (fallbacks if you don’t use separate syntax CSS) */
  --syn-comment: #6a737d;
  --syn-kw: #d73a49;
  --syn-op: #d73a49;
  --syn-string: #032f62;
  --syn-number: #005cc5;
  --syn-type: #6f42c1;
  --syn-func: #005cc5;
  --syn-var: #005cc5;
  --syn-attr: #6f42c1;
  --syn-tag: #22863a;
}

/* ---------- Color tokens: dark override ---------- */
[data-theme="dark"] {
  --bg: #0b1220;            /* deep slate/navy */
  --fg: #e5e7eb;            /* gray-200 */
  --muted-fg: #9aa4b2;      /* slate-400 */
  --border: #1f2937;        /* gray-800 */
  --card: #0f172a;          /* slate-900 */
  --shadow: 0 1px 2px rgba(0, 0, 0, .5), 0 8px 24px rgba(0, 0, 0, .35);

  --accent: #60a5fa;        /* blue-400 */
  --accent-contrast: #0b1220;

  --link: #93c5fd;
  --link-hover: #60a5fa;

  --code-bg: #0d1117;       /* GitHub dark */
  --code-inline-bg: #111827;/* gray-900 */
  --code-fg: #c9d1d9;

  --syn-comment: #8b949e;
  --syn-kw: #ff7b72;
  --syn-op: #ff7b72;
  --syn-string: #a5d6ff;
  --syn-number: #79c0ff;
  --syn-type: #d2a8ff;
  --syn-func: #79c0ff;
  --syn-var: #79c0ff;
  --syn-attr: #d2a8ff;
  --syn-tag: #7ee787;
}

/* ---------- Respect system preference when no manual selection ---------- */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    color-scheme: dark;
    /* mirror dark tokens without setting data-theme */
    --bg: #0b1220;
    --fg: #e5e7eb;
    --muted-fg: #9aa4b2;
    --border: #1f2937;
    --card: #0f172a;
    --shadow: 0 1px 2px rgba(0, 0, 0, .5), 0 8px 24px rgba(0, 0, 0, .35);

    --accent: #60a5fa;
    --accent-contrast: #0b1220;

    --link: #93c5fd;
    --link-hover: #60a5fa;

    --code-bg: #0d1117;
    --code-inline-bg: #111827;
    --code-fg: #c9d1d9;

    --syn-comment: #8b949e;
    --syn-kw: #ff7b72;
    --syn-op: #ff7b72;
    --syn-string: #a5d6ff;
    --syn-number: #79c0ff;
    --syn-type: #d2a8ff;
    --syn-func: #79c0ff;
    --syn-var: #79c0ff;
    --syn-attr: #d2a8ff;
    --syn-tag: #7ee787;
  }
}

/* ---------- Base ---------- */
*,
*::before,
*::after { box-sizing: border-box; }

html, body {
  padding: 0;
  margin: 0;
  height: 100%;
}

body {
  background: var(--bg);
  color: var(--fg);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
  line-height: 1.6;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  transition: background-color .25s ease, color .25s ease, border-color .25s ease;
}

@media (prefers-reduced-motion: reduce) {
  body { transition: none; }
}

/* ---------- Typography & elements ---------- */
a {
  color: var(--link);
  text-decoration: none;
}
a:hover, a:focus {
  color: var(--link-hover);
  text-decoration: underline;
}

hr {
  border: 0;
  border-top: 1px solid var(--border);
  margin: 2rem 0;
}

img, svg, video {
  max-width: 100%;
  height: auto;
}

::selection {
  background: color-mix(in oklab, var(--accent) 25%, transparent);
}

/* ---------- Layout helpers ---------- */
.container {
  max-width: 72rem;
  margin: 0 auto;
  padding: 1.5rem;
}

header.site-header,
footer.site-footer,
nav.site-nav {
  background: var(--card);
  border-bottom: 1px solid var(--border);
  box-shadow: var(--shadow);
}

footer.site-footer {
  border-top: 1px solid var(--border);
  border-bottom: none;
}

/* ---------- Buttons ---------- */
button,
[type="button"],
[type="submit"] {
  font: inherit;
  color: var(--fg);
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: .5rem;
  padding: .5rem .75rem;
  cursor: pointer;
  transition: background-color .2s ease, border-color .2s ease, color .2s ease, box-shadow .2s ease;
}
button:hover {
  border-color: color-mix(in oklab, var(--accent) 35%, var(--border));
  box-shadow: 0 1px 2px rgba(0,0,0,.08);
}

/* Floating theme toggle button (matches foot.html #theme-toggle) */
#theme-toggle {
  position: fixed;
  right: 1rem;
  bottom: 1rem;
  z-index: 1000;
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  background: var(--card);
  color: var(--fg);
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: .5rem .875rem;
  box-shadow: var(--shadow);
}
#theme-toggle:focus {
  outline: 2px solid color-mix(in oklab, var(--accent) 45%, transparent);
  outline-offset: 2px;
}

/* ---------- Code blocks & inline code ---------- */
code, pre, kbd, samp {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: .925em;
}

code {
  background: var(--code-inline-bg);
  color: var(--code-fg);
  padding: .15em .35em;
  border: 1px solid var(--border);
  border-radius: .35rem;
}

pre {
  background: var(--code-bg);
  color: var(--code-fg);
  padding: 1rem;
  border: 1px solid var(--border);
  border-radius: .5rem;
  overflow: auto;
}
pre code {
  background: transparent;
  border: 0;
  padding: 0;
  color: inherit;
}

/* Rouge wrapper */
.highlight {
  background: var(--code-bg);
  color: var(--code-fg);
  border-radius: .5rem;
  overflow: auto;
}
.highlight pre { margin: 0; border: 0; }

/* Optional: minimal token colors using vars above
   If you’re also loading syntax-light.css / syntax-dark.css, those will override these. */
.highlight .c,
.highlight .cm,
.highlight .c1,
.highlight .cs { color: var(--syn-comment); font-style: italic; }
.highlight .k,
.highlight .kc,
.highlight .kd,
.highlight .kn,
.highlight .kp,
.highlight .kr,
.highlight .kt { color: var(--syn-kw); }
.highlight .o,
.highlight .ow { color: var(--syn-op); }
.highlight .s,
.highlight .sb,
.highlight .sc,
.highlight .sd,
.highlight .s1,
.highlight .s2,
.highlight .se,
.highlight .sh,
.highlight .si,
.highlight .sx,
.highlight .sr { color: var(--syn-string); }
.highlight .m,
.highlight .mb,
.highlight .mf,
.highlight .mh,
.highlight .mi,
.highlight .mo,
.highlight .il { color: var(--syn-number); }
.highlight .nc,
.highlight .nn,
.highlight .nt,
.highlight .na,
.highlight .nd,
.highlight .ni,
.highlight .ne { color: var(--syn-type); }
.highlight .nf,
.highlight .nl { color: var(--syn-func); }
.highlight .nv,
.highlight .vc,
.highlight .vg,
.highlight .vi,
.highlight .bp { color: var(--syn-var); }
.highlight .nt { color: var(--syn-tag); }

/* ---------- Tables ---------- */
table {
  width: 100%;
  border-collapse: collapse;
  margin: 1rem 0;
  font-variant-numeric: tabular-nums;
}
th, td {
  border: 1px solid var(--border);
  padding: .5rem .75rem;
  text-align: left;
}
thead th {
  background: var(--card);
}